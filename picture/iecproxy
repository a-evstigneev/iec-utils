.PS
scale=2.54

h = 0.4
w = 3.5

P1: box ht h wid w "pipe"; 
P2: box ht h wid w "pipe" with .t at P1.b
"ASDU ascii-hex" with .s at P1.n + (0,0.3)
"статус передачи" with .n at P2.s - (0,0.3)

Ip: box "iecproxy" with .e at P1.sw + (-1.4,0)
Il: box "ieclink" with .w at P1.se + (1.4,0)

line <- from P1.w to Ip.e + (0,0.1) 
line -> from P1.e to Il.w + (0,0.1)

line -> from P2.w to Ip.e - (0,0.1)
line <- from P2.e to Il.w - (0,0.1)

BrIp: box wid (w + 2*1.4 + 2*boxwid + 2*0.4) ht (boxht + 0.9) at P1.b dashed
"ieclink" ljust "устанавливает" ljust "TCP соединение" ljust "с CTS" ljust with .w at BrIp.e + (0.4,0)

Us: box ht 0.8 wid 2.6 "UNIX socket" rad 0.3 with .n at Ip.s - (0,2)
down
line <- 2 from 2/5 <Ip.sw, Ip.se>
"ASDU  " rjust "ascii-hex  " rjust at last line.c - (0,0.2)
line -> 2 from 3/5 <Ip.sw, Ip.se> 
"  статус" ljust "  передачи" ljust at last line.c - (0,0.2)

Cts: box "CTS" with .n at Il.s - (0,2)
line <- 2 from 2/5 <Il.sw, Il.se>
"APDU  " rjust "iec104  " rjust at last line.c - (0,0.2)
line -> 2 from 3/5 <Il.sw, Il.se> 
"  APDU" ljust "  iec104" ljust at last line.c - (0,0.2)

.PE
